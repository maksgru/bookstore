(this["webpackJsonpreact-ts"]=this["webpackJsonpreact-ts"]||[]).push([[0],{147:function(e,t,n){},148:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},212:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return In}));var a=n(1),r=n(0),c=n.n(r),s=n(23),i=n.n(s),o=(n(147),n(148),n(41)),u=n(16),l=n(237),d=n(221),j=n(138),b=n(10),h="SIGN_IN",p="SIGN_OUT",f="BOOKS_LOAD_REQUEST",m="BOOKS_LOAD_SUCCESS",O="BOOK_PAGE_SUCCESS",x="REQUEST_SUCCESS",g="REQUEST_FAILURE",v="GENER_LIST_LOADED",k="AUTHOR_LIST_LOADED",w="PRICE_RANGE_LOADED",y="CHANGE_USER_IMG",I="SET_PRICE",S="SET_RATING",N="SET_GENER",C="SET_AUTHORS",T="FAVORITES_LOADED",E="REVIEWS_LOADED",A="BOOK_IMAGES_LOADED",P="SHOW_SIDEBAR",B="HIDE_SIDEBAR",F="SET_VIEWPORT_WIDTH",L="SET_SORT_TARGET",D="SET_SORT_DIRECTION",R="SET_PAGE_NUMBER",_="SET_PAGE_COUNT",G=function(e){return{type:h,payload:e}},U=function(){return H(),{type:p}},z=function(e){return{type:y,payload:e}},W=function(e){return localStorage.setItem("token",e.tokens.accessToken),localStorage.setItem("refreshToken",e.tokens.refreshToken),e.userData},H=function(){localStorage.removeItem("token"),localStorage.removeItem("refreshToken")},V=n(239),M=n(136),q=Object(M.io)("http://localhost:4000/"),K=function(e){var t=e.iconUrl,n=e.userName,c=Object(b.d)((function(e){return{userId:e.auth.id}})).userId,s=Object(r.useState)(!1),i=Object(u.a)(s,2),l=i[0],d=i[1];return Object(r.useEffect)((function(){q.on("newBook",(function(e){e.userId!=="".concat(c)&&d(!0)}))}),[l,c]),Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)("i",{className:"fa fa-bell mr-3 text-warning","area-hidden":"true"}),Object(a.jsxs)(o.b,{to:"/profile",className:"p-0 mr-4 btn-bdnone",style:{textDecoration:"none"},children:[Object(a.jsx)("span",{className:"mr-4",children:n}),Object(a.jsx)(V.a,{className:"m-0",children:Object(a.jsx)(V.a.Image,{className:"m-0 rounded-circle",width:60,height:60,alt:"",src:t})})]})]})},Q=n(14),J=n(234),$=n(8),Y=n.n($),X=n(11),Z=n(53),ee=n(74),te=n(75),ne=n(91),ae=n(89),re=n(235),ce=n(218),se=function(e){var t=e.handleName;return Object(a.jsx)(re.a.Group,{children:Object(a.jsxs)(ce.a,{children:[Object(a.jsx)(ce.a.Prepend,{children:Object(a.jsx)(ce.a.Text,{children:Object(a.jsx)("i",{className:"fa fa-user fa-fw"})})}),Object(a.jsx)(re.a.Control,{name:"userName",onChange:t,placeholder:"Enter your name"})]})})},ie=function(e){var t=e.handleEmail;return Object(a.jsx)(re.a.Group,{controlId:"formBasicEmail",children:Object(a.jsxs)(ce.a,{children:[Object(a.jsx)(ce.a.Prepend,{children:Object(a.jsx)(ce.a.Text,{children:Object(a.jsx)("i",{className:"fa fa-envelope fa-fw"})})}),Object(a.jsx)(re.a.Control,{name:"email",onChange:t,type:"email",placeholder:"Enter email"})]})})},oe=function(e){var t=e.handlePassword,n=e.placeholder;return Object(a.jsx)(re.a.Group,{controlId:"formBasicPassword",children:Object(a.jsxs)(ce.a,{children:[Object(a.jsx)(ce.a.Prepend,{children:Object(a.jsx)(ce.a.Text,{children:Object(a.jsx)("i",{className:"fa fa-lock fa-fw"})})}),Object(a.jsx)(re.a.Control,{name:"password",onChange:t,type:"password",placeholder:n})]})})},ue=function(e){var t=e.submitBtnText,n=e.toggleBtnText,r=e.togglePage;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j.a,{onClick:r,className:"btn-tog float-right",variant:"link",size:"sm",children:n}),Object(a.jsx)(j.a,{variant:"primary",type:"submit",block:!0,disabled:!1,children:t})]})},le=n(219),de=n(220),je=n(95),be=n.n(je),he={type:g},pe=be.a.create({baseURL:"http://ec2-3-127-148-123.eu-central-1.compute.amazonaws.com:4000"});pe.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers||(e.headers={}),e.headers.Authorization="Bearer ".concat(t),e})),pe.interceptors.response.use((function(e){return e.data}),(function(e){var t=e.config,n=e.response.status,a="http://localhost:4000/auth/refresh-tokens",r=localStorage.getItem("refreshToken");if(!r)throw In.dispatch(U()),e;if(401===n&&t.url!==a)return be.a.post(a,{refreshToken:r}).then((function(e){var n={accessToken:e.data.accessToken,refreshToken:e.data.refreshToken};return fe(n),t.headers.Authorization="Bearer ".concat(e.data.accessToken),be()(t).then((function(e){return e.data}))})).catch((function(e){401!==e.response.status||In.dispatch(U())}));throw In.dispatch(he),e}));var fe=function(e){localStorage.setItem("token",e.accessToken),localStorage.setItem("refreshToken",e.refreshToken)};(function(){var e=Object(X.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=12;break}return e.prev=2,e.next=5,pe.post("/auth/update");case 5:(t=e.sent)&&In.dispatch(G(t)),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),e.t0;case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}})()();var me=pe,Oe=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.post("/auth/signin",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.post("/auth/signup",t);case 2:return n={email:t.email,password:t.password},e.next=5,Oe(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){Object(ne.a)(n,e);var t=Object(ae.a)(n);function n(e){var a;return Object(ee.a)(this,n),(a=t.call(this,e)).handleChange=function(e){var t=e.target.value,n=e.target.name;a.setState(Object(Z.a)({},n,t))},a.auth=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"login"!==a.state.pageName){e.next=16;break}return n={email:a.state.email,password:a.state.password},e.prev=3,e.next=6,Oe(n);case 6:return r=e.sent,a.setState({userName:"",email:"",password:""}),a.props.signIn(r),e.abrupt("return");case 12:e.prev=12,e.t0=e.catch(3),a.setState({error:!0});case 15:a.props.signOut();case 16:if("register"!==a.state.pageName){e.next=35;break}if(a.state.password===a.state.confirmedPassword){e.next=20;break}return a.setState({error:!0}),e.abrupt("return");case 20:return n={name:a.state.userName,email:a.state.email,password:a.state.password},e.prev=22,e.next=25,xe(n);case 25:return c=e.sent,a.setState({userName:"",email:"",password:""}),a.props.signIn(c),e.abrupt("return");case 31:e.prev=31,e.t1=e.catch(22),a.setState({error:!0});case 34:a.props.signOut();case 35:case"end":return e.stop()}}),e,null,[[3,12],[22,31]])})));return function(t){return e.apply(this,arguments)}}(),a.handlePassword=function(e){var t=e.target.value;a.setState({password:t}),a.state.confirmedPassword!==t?a.setState({isPasswordsMatch:!0}):a.setState({isPasswordsMatch:!1})},a.handlePasswordConfirm=function(e){var t=e.target.value;a.setState({confirmedPassword:t}),a.state.password!==t?a.setState({isPasswordsMatch:!0}):a.setState({isPasswordsMatch:!1})},a.togglePage=function(){a.setState((function(e){var t="login"===e.pageName?"register":"login";return{submitBtn:e.toggleBtn,toggleBtn:e.submitBtn,pageName:t}}))},a.state={userName:"",email:"",password:"",confirmedPassword:"",submitBtn:"LogIn",toggleBtn:"Register",pageName:"login",error:!1,isPasswordsMatch:!1},a}return Object(te.a)(n,[{key:"render",value:function(){return Object(a.jsx)(le.a,{className:"d-flex align-items-center justify-content-center",style:{maxHeight:"80vh"},children:Object(a.jsxs)(re.a,{onSubmit:this.auth,style:{minWidth:"25%"},children:[Object(a.jsx)("div",{style:{textAlign:"center",marginBottom:"2rem"},children:Object(a.jsxs)("h1",{children:["book ",Object(a.jsx)("strong",{children:"STORE"})]})}),"register"===this.state.pageName&&Object(a.jsx)(se,{handleName:this.handleChange}),Object(a.jsx)(ie,{handleEmail:this.handleChange}),Object(a.jsx)(oe,{handlePassword:this.handlePassword,placeholder:"Password"}),this.state.isPasswordsMatch&&"register"===this.state.pageName&&Object(a.jsx)(re.a.Text,{className:"text-danger",children:"Passwords do not match!"}),"register"===this.state.pageName&&Object(a.jsx)(oe,{handlePassword:this.handlePasswordConfirm,placeholder:"Confirm password"}),Object(a.jsx)(ue,{submitBtnText:this.state.submitBtn,toggleBtnText:this.state.toggleBtn,togglePage:this.togglePage}),this.state.error&&Object(a.jsxs)(de.a,{variant:"danger mt-5",children:["Incorrect ".concat(this.state.pageName," data!"),Object(a.jsx)("br",{}),"Please insert correct data and try again..."]})]})})}}]),n}(r.Component),ve={signIn:function(e){return{type:h,payload:W(e)}},signOut:function(){return U()}},ke=Object(b.b)(null,ve)(ge);var we=function(e){return Object(a.jsxs)(J.a,Object(Q.a)(Object(Q.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(a.jsx)(J.a.Header,{closeButton:!0}),Object(a.jsx)(ke,{})]}))},ye={type:P},Ie={type:B},Se=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{userName:e.auth.name,userIcon:e.auth.userImg,isLoggedIn:e.auth.isLoggedIn,sidebarState:e.sidebar,viewportWidth:e.viewport}})),n=t.userName,c=t.userIcon,s=t.isLoggedIn,i=t.sidebarState,o=t.viewportWidth,h=Object(r.useState)(!1),p=Object(u.a)(h,2),f=p[0],m=p[1],O=!0,x=s?"in":"out",g=s?"Out":"In";return s&&(O=!1),Object(a.jsxs)(l.a,{expand:"md",bg:"dark",variant:"dark",className:"mb-3",children:[O&&Object(a.jsx)(we,{show:f,onHide:function(){return m(!1)}}),Object(a.jsxs)(d.a,{children:[Object(a.jsxs)("div",{children:[o<=768&&Object(a.jsx)(j.a,{variant:"dark",onClick:function(){e(i?Ie:ye)},children:"| | |"}),o>768&&Object(a.jsx)(l.a.Brand,{href:"/",className:"align-middle",children:"bookSTORE"})]}),Object(a.jsxs)("span",{className:"navbar-text",children:[s&&Object(a.jsx)(K,{iconUrl:c,userName:n}),Object(a.jsxs)(j.a,{onClick:function(){return s?e(U()):m(!0)},variant:"outline-info btn-tog btn-bdnone m-0",children:[Object(a.jsx)("i",{className:"fa fa-sign-".concat(x," fa-2x"),"aria-hidden":"true"}),"Sign ",g]})]})]})]})},Ne=n(20),Ce=n(222),Te=n(137),Ee=function(e){return{type:R,payload:e}},Ae=function(e){return{type:T,payload:e}},Pe=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n,a,r,c,s,i,o,u,l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=In.getState().sort,a=n.sortTarget,r=n.direction,c=In.getState().page.page,s=In.getState().filter.gener,i=In.getState().filter.price,o=In.getState().filter.rating,u=In.getState().filter.authors,e.next=8,me.get("/books",{params:Object(Q.a)(Object(Q.a)({},t),{},{sortTarget:a,direction:r,page:c,gener:s,price:i,rating:o,authors:u})});case 8:return l=e.sent,In.dispatch((j=l.rows,{type:m,payload:j})),In.dispatch((d=l.count,{type:_,payload:d})),e.abrupt("return",l);case 12:case"end":return e.stop()}var d,j}),e)})));return function(t){return e.apply(this,arguments)}}(),Be=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.get("/books/:".concat(t));case 2:n=e.sent,In.dispatch({type:O,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.patch("/books/:".concat(t),{description:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Le=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me("/books",{method:"post",data:t,headers:{"content-type":"multipart/form-data"}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var a,r,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("add"!==n){e.next=5;break}return e.next=3,me.post("/favorites",{bookId:t,type:n});case 3:a=e.sent,In.dispatch(Ae(a));case 5:if("del"!==n){e.next=10;break}return e.next=8,me.delete("/favorites",{params:{bookId:t,type:n}});case 8:r=e.sent,In.dispatch(Ae(r));case 10:c=In.getState().auth.id,q.emit("bookCreated",{userId:"".concat(c)});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Re=function(){var e=Object(X.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.get("/favorites");case 2:t=e.sent,In.dispatch(Ae(t));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.get("/data",{params:Object(Q.a)({},t)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=n(90),Ue=function(e){return{type:k,payload:e.map((function(e){return e.name}))}},ze=function(e){return{type:C,authors:e}},We=function(e){return{type:I,price:e}},He=function(e){return{type:S,rating:e}},Ve=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{authors:e.authors,selectedAuthors:e.filter.authors}})),n=t.authors,c=t.selectedAuthors,s=function(t){var n=t.target.id;t.target.checked&&c?e(ze([].concat(Object(Ge.a)(c),[n]))):c&&e(ze(c.filter((function(e){return e!==n}))))};return Object(r.useEffect)((function(){(function(){var t=Object(X.a)(Y.a.mark((function t(){var n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e({authors:!0});case 2:n=t.sent,e(Ue(n.authors));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(a.jsxs)(re.a,{className:"mb-2",children:[Object(a.jsx)("strong",{children:"Authors"}),n&&n.map((function(e){return Object(a.jsx)(re.a.Check,{onChange:s,className:"ml-1",type:"checkbox",id:e,label:e},e)}))]})},Me=n(240),qe=function(e){return{type:v,payload:e.map((function(e){return e.name}))}},Ke=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{geners:e.geners,currentGener:e.filter.gener}})),n=t.geners,c=t.currentGener,s=function(t){var n=t.target.innerText;e(Ee(1)),e(function(e){return{type:N,gener:e}}(n)),Pe()};return Object(r.useEffect)((function(){(function(){var t=Object(X.a)(Y.a.mark((function t(){var n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e({geners:!0});case 2:n=t.sent,e(qe(n.geners));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(a.jsxs)("div",{className:"mb-2",children:[Object(a.jsx)("strong",{children:"Genres"}),Object(a.jsx)("div",{children:n.map((function(e){var t=e===c?"text-info selected":"";return Object(a.jsx)(Me.a.Link,{onFocus:s,className:"ml-1 p-0 gen-item ".concat(t),children:e},e)}))})]})},Qe=n(223),Je=n(139),$e=n.n(Je),Ye=function(e){return{type:w,payload:e}},Xe=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{price:e.filter.price,priceRange:e.price}})),n=t.price,c=t.priceRange,s=Object(u.a)(c,2),i=s[0],o=s[1],l=n.split(","),j=Object(u.a)(l,2),h=j[0],p=void 0===h?"":h,f=j[1],m=void 0===f?"":f;return Object(r.useEffect)((function(){(function(){var t=Object(X.a)(Y.a.mark((function t(){var n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_e({price:!0});case 2:n=t.sent,e(Ye(n.priceRange));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(a.jsxs)(d.a,{className:"pl-0 ml-2",style:{maxWidth:"200px"},children:[Object(a.jsx)("strong",{children:"Price"}),Object(a.jsx)($e.a,{className:"my-3 mx-0",range:{min:i,max:o},start:[i,o],onUpdate:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n[0],c=Object(u.a)(r,2),s=c[0],i=c[1],o=Math.floor(s),l=Math.floor(i);e(We("".concat(o,",").concat(l)))},connect:!0}),Object(a.jsxs)(Ce.a,{children:[Object(a.jsx)(Te.a,{children:Object(a.jsx)(Qe.a,{variant:"light border border-info py-2 px-3",children:Math.floor(+p/100)})}),Object(a.jsx)(Te.a,{children:Object(a.jsx)(Qe.a,{variant:"light border border-info py-2 px-3",children:Math.ceil(+m/100)})})]})]})},Ze=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{rating:e.filter.rating}})).rating,n=Array.from(Array(5).keys()),r=function(n){var a=+n.currentTarget.id;e(He(a!==t?a:null))};return Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Rating"}),Object(a.jsx)(Ce.a,{className:"mt-1 ml-1",children:n.map((function(e){var n;return n=t&&e+1<=t?"":"-o",Object(a.jsx)("div",{children:Object(a.jsx)(j.a,{onClick:r,id:(1+e).toString(),variant:"outline-warning btn-tog btn-bdnone star-rat mb-2",size:"sm",children:Object(a.jsx)("i",{className:"fa fa-star".concat(n," fa-lg"),"aria-hidden":"true"})})},e+"q")}))})]})},et=function(){var e=Object(b.c)();return Object(a.jsxs)(Te.a,{style:{maxWidth:"200px"},className:"mb-2",children:[Object(a.jsx)(Ke,{}),Object(a.jsx)(Ze,{}),Object(a.jsx)(Ve,{}),Object(a.jsx)(Xe,{}),Object(a.jsxs)(j.a,{onClick:function(){e(Ee(1)),e(Ie),Pe()},variant:"outline-info mt-4",size:"sm",children:[Object(a.jsx)("span",{children:"show books"}),Object(a.jsx)("i",{className:"fa fa-filter ml-2","aria-hidden":"true"})]})]})},tt=n(224),nt=n(225),at=n(141),rt=function(e){return{type:D,payload:e}},ct=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{sortDirection:e.sort.direction,sortTarget:e.sort.sortTarget}})),n=t.sortDirection,r=t.sortTarget,c=function(){var t=Object(X.a)(Y.a.mark((function t(n){var a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=n.currentTarget.innerText,e((r=a.toLowerCase(),{type:L,payload:r})),Pe();case 3:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}(),s=function(){var t=Object(X.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(rt("ASC"===n?"DESC":"ASC")),Pe();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsx)(Ce.a,{className:"justify-content-end mr-3 pb-2",children:Object(a.jsxs)(tt.a,{children:[Object(a.jsx)(j.a,{onClick:s,variant:"outline-info",size:"sm",children:Object(a.jsx)("i",{className:"fa fa-sort-amount-".concat(n.toLowerCase()),"aria-hidden":"true"})}),Object(a.jsxs)(nt.a,{variant:"outline-info",as:tt.a,title:r.charAt(0).toUpperCase()+r.slice(1),id:"bg-nested-dropdown",size:"sm",children:[Object(a.jsx)(at.a.Item,{onClick:c,eventKey:"1",children:"Name"}),Object(a.jsx)(at.a.Item,{onClick:c,eventKey:"2",children:"Price"}),Object(a.jsx)(at.a.Item,{onClick:c,eventKey:"2",children:"Rating"})]})]})})},st=n(227),it=n(241),ot=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{page:e.page.page,pageCount:e.page.pageCount}})),n=t.page,r=t.pageCount,c=function(t){var n=+t.target.innerText;e(Ee(+n)),Pe()},s=Math.ceil(r/3);return Object(a.jsxs)(it.a,{size:"sm",children:[Object(a.jsx)(it.a.Prev,{}),Array.from(Array(s).keys()).map((function(e){return Object(a.jsx)(it.a.Item,{active:e+1===n,onFocus:c,children:e+1},e+"t")})),Object(a.jsx)(it.a.Next,{})]})},ut=n(242),lt=n(238),dt=n(226),jt=function(e){var t=e.rating,n=e.id,c=Object(b.d)((function(e){return{isAuth:e.auth.isLoggedIn,favorites:e.favorites}})),s=c.isAuth,i=c.favorites,o=Object(r.useState)(!1),l=Object(u.a)(o,2),d=l[0],h=l[1],p=function(){var e=Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!d){e.next=4;break}return e.next=3,De(n,"del");case 3:h(!1);case 4:if(d){e.next=8;break}return e.next=7,De(n,"add");case 7:h(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=!i.every((function(e){return e.id!==n}));h(e)}),[d,i,n]),Object(a.jsxs)(ut.a.Footer,{className:"p-1",children:[Object(a.jsx)("div",{className:"mt-2 ml-2 float-left",children:Array.from(Array(5).keys()).map((function(e){var n=+e<t?"":"-o";return Object(a.jsx)("div",{className:"text-warning float-left mx-1",children:Object(a.jsx)("i",{className:"fa fa-star".concat(n),"aria-hidden":"true"})},e+"a")}))}),s&&Object(a.jsx)(lt.a,{overlay:Object(a.jsx)(dt.a,{id:"tooltip-disabled",children:"Add to favorites"}),children:Object(a.jsx)(j.a,{onClick:p,variant:"outline-danger float-right btn-tog btn-bdnone m-0",children:Object(a.jsx)("i",{className:"fa fa-heart".concat(d?"":"-o"),"aria-hidden":"true"})})})]})},bt=function(e){var t=e.book,n=t.bookIcon?t.bookIcon:"https://www.transparentpng.com/thumb/book/dvATkC-download-book.png";return Object(a.jsxs)(ut.a,{style:{minWidth:"14rem",maxWidth:"16rem",marginBottom:"20px"},children:[Object(a.jsx)(ut.a.Header,{className:"clip",children:Object(a.jsx)("strong",{children:t.name})}),Object(a.jsxs)(o.b,{to:"/book",onClick:function(){localStorage.setItem("bookId",t.id.toString())},style:{textDecoration:"none"},children:[Object(a.jsx)(ut.a.Img,{variant:"top",className:"p-3 mx-auto d-block",src:n,style:{maxHeight:"15rem",width:"auto"}}),Object(a.jsx)(ut.a.Body,{className:"bk-card pt-0",children:Object(a.jsxs)(ut.a.Text,{children:[t.writer.name,Object(a.jsx)("strong",{className:"float-right text-info",children:"$ ".concat((t.price/100).toFixed(2))})]})})]}),Object(a.jsx)(jt,{rating:t.rating,id:t.id})]})},ht=(n(207),function(){return Object(a.jsx)("div",{className:"loadingio-spinner-ripple-qd9ydsvk7xs mx-auto",children:Object(a.jsxs)("div",{className:"ldio-x7k2cpkocqc",children:[Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})})}),pt=function(){var e=Object(b.d)((function(e){return{books:e.bookList.books,loading:e.bookList.loading,isAuth:e.auth.isLoggedIn}})),t=e.books,n=e.loading,c=e.isAuth;return Object(r.useEffect)((function(){Pe(),c&&Re()}),[c]),Object(a.jsxs)(Te.a,{children:[Object(a.jsx)(st.a,{children:n?Object(a.jsx)(ht,{}):t.map((function(e){return Object(a.jsx)(Te.a,{children:Object(a.jsx)(bt,{book:e})},e.id)}))}),Object(a.jsx)(Ce.a,{className:"justify-content-center",children:Object(a.jsx)(ot,{})})]})},ft=(n(208),function(e){return Object(a.jsxs)(J.a,{id:"sidebar",show:e.isVisible,onHide:e.onHide,children:[Object(a.jsx)(J.a.Header,{style:{border:"none"},closeButton:!0,children:Object(a.jsx)(l.a.Brand,{href:"/",className:"align-middle",children:Object(a.jsx)("strong",{className:"text-danger",children:"bookSTORE"})})}),e.children]})}),mt=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{isSidebarVisible:e.sidebar,viewportWidth:e.viewport}})),n=t.isSidebarVisible,r=t.viewportWidth;return Object(a.jsxs)(d.a,{children:[Object(a.jsx)(ct,{}),Object(a.jsxs)(Ce.a,{children:[r>768?Object(a.jsx)(et,{}):Object(a.jsx)(ft,{isVisible:n,onHide:function(){return e(Ie)},children:Object(a.jsx)(et,{})}),Object(a.jsx)(pt,{})]})]})},Ot=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.post("/upload/userimg",t,{headers:{"content-type":"multipart/form-data"}});case 2:n=e.sent,In.dispatch(z(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.post("/upload/image",t,{headers:{"content-type":"multipart/form-data"}});case 2:n=e.sent,In.dispatch({type:A,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(){var e=Object(r.useState)(!0),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(b.d)((function(e){return{userName:e.auth.name,iconUrl:e.auth.userImg}})),i=s.userName,o=s.iconUrl,l=Object(r.useState)(""),d=Object(u.a)(l,2),h=d[0],p=d[1],f=new FormData,m=function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),f.append("filedata",h),Ot(f);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(ut.a,{style:{maxWidth:"15rem"},children:[Object(a.jsx)(ut.a.Header,{style:{height:"3.4rem"},children:"My profile"}),Object(a.jsx)(V.a,{className:"text-center mt-3",children:Object(a.jsx)(V.a.Image,{width:200,height:200,alt:"171x180",src:o})}),Object(a.jsxs)(ut.a.Body,{children:[Object(a.jsx)(ut.a.Title,{children:i}),Object(a.jsx)(re.a,{children:Object(a.jsxs)(re.a.Group,{children:[Object(a.jsx)(re.a.File,{onChange:function(e){var t=e.currentTarget.files[0];p(t),c(!t)},id:"exampleFormControlFile1"}),Object(a.jsx)(j.a,{variant:"outline-primary",className:"mt-2",as:"input",onClick:m,type:"submit",value:"Load",size:"sm",disabled:n})]})})]})]})},vt=function(e){Object(ne.a)(n,e);var t=Object(ae.a)(n);function n(e){var a;return Object(ee.a)(this,n),(a=t.call(this,e)).initialState={name:"",author:"",gener:"",price:"",description:"",bookImage:"",isSendPossible:!1},a.checkForm=function(e){for(var t in e)if("isSendPossible"!==t&&!t)return!1;return!0},a.handleChange=function(e){var t=e.target.value;console.log(t);var n=e.target.name;a.setState(Object(Z.a)({},n,t)),a.setState((function(e){return{isSendPossible:a.checkForm(e)}}))},a.handleFile=function(e){e.preventDefault(),a.setState({bookImage:e.target.files[0]})},a.createBook=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.state.isSendPossible){e.next=3;break}return e.abrupt("return");case 3:return(n=new FormData).append("bookImg",a.state.bookImage),n.append("name",a.state.name),n.append("author",a.state.author),n.append("gener",a.state.gener),n.append("price",a.state.price),n.append("description",a.state.description),e.next=12,Le(n);case 12:a.setState(Object(Q.a)({},a.initialState));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state=a.initialState,a}return Object(te.a)(n,[{key:"componentDidMount",value:function(){var e=Object(X.a)(Y.a.mark((function e(){var t;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e({authors:!0,geners:!0});case 2:t=e.sent,this.props.setAuthors(t.authors),this.props.setGeners(t.geners);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)(re.a,{className:"mt-4",children:[Object(a.jsxs)(re.a.Group,{children:[Object(a.jsx)(re.a.Label,{children:"Book title"}),Object(a.jsx)(re.a.Control,{name:"name",onChange:this.handleChange,placeholder:"Book Title",value:this.state.name})]}),Object(a.jsxs)(re.a.Group,{children:[Object(a.jsx)(re.a.Label,{children:"Book author"}),Object(a.jsxs)(re.a.Control,{name:"author",onChange:this.handleChange,as:"select",defaultValue:"Please choose author",children:[Object(a.jsx)("option",{disabled:!0,hidden:!0,children:"Please choose author"}),this.props.authors.map((function(e){return Object(a.jsx)("option",{children:e},e)}))]})]}),Object(a.jsxs)(re.a.Group,{controlId:"exampleForm.ControlSelect1",children:[Object(a.jsx)(re.a.Label,{children:"Book gener"}),Object(a.jsxs)(re.a.Control,{as:"select",name:"gener",onChange:this.handleChange,defaultValue:"Please choose gener",children:[Object(a.jsx)("option",{disabled:!0,hidden:!0,children:"Please choose gener"}),this.props.geners.map((function(e){return Object(a.jsx)("option",{children:e},e)}))]})]}),Object(a.jsxs)(re.a.Group,{children:[Object(a.jsx)(re.a.Label,{children:"Book price"}),Object(a.jsx)(re.a.Control,{name:"price",onChange:this.handleChange,placeholder:"Book price",value:this.state.price})]}),Object(a.jsx)(re.a.Group,{children:Object(a.jsx)(re.a.File,{onChange:this.handleFile,id:"exampleFormControlFile1",label:"Choose book image"})}),Object(a.jsxs)(re.a.Group,{controlId:"exampleForm.ControlTextarea1",children:[Object(a.jsx)(re.a.Label,{children:"Book description"}),Object(a.jsx)(re.a.Control,{name:"description",onChange:this.handleChange,as:"textarea",rows:3,value:this.state.description})]}),Object(a.jsx)(j.a,{onClick:this.createBook,type:"submit",variant:"outline-primary",className:"float-right",disabled:!this.state.isSendPossible,children:Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{children:"Add Book"}),Object(a.jsx)("i",{className:"fa fa-book fa-lg ml-2","aria-hidden":"true"})]})})]})}}]),n}(r.Component),kt={setAuthors:function(e){return Ue(e)},setGeners:function(e){return qe(e)}},wt=Object(b.b)((function(e){return{geners:e.geners,authors:e.authors}}),kt)(vt),yt=n(243),It=n(110),St=function(){var e=Object(b.d)((function(e){return{books:e.favorites}})).books,t=function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:De(t,"del");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Re()}),[]),Object(a.jsx)(yt.a,{children:e.map((function(e){return Object(a.jsxs)(yt.a.Item,{children:[Object(a.jsxs)(o.b,{to:"/book",onClick:function(){return t=e.id,void localStorage.setItem("bookId",t.toString());var t},style:{textDecoration:"none"},children:[Object(a.jsx)(It.a,{style:{maxHeight:"30px",width:"auto"},src:e.bookIcon,rounded:!0}),Object(a.jsx)("span",{className:"ml-2",children:e.name})]}),Object(a.jsx)(j.a,{onClick:function(){return t(e.id)},variant:"outline-danger float-right ",size:"sm",children:Object(a.jsx)("i",{className:"fa fa-trash-o fa-lg","aria-hidden":"true"})}),Object(a.jsx)("span",{className:"mx-4 float-right",children:Array.from(Array(5).keys()).map((function(t){var n=+t<e.rating?"":"-o";return Object(a.jsx)("i",{className:"fa fa-star".concat(n," text-warning"),"aria-hidden":"true"},t+"y")}))})]},e.id)}))})},Nt=function(){var e=Object(r.useState)("Add book"),t=Object(u.a)(e,2),n=t[0],c=t[1],s=function(e){var t=e.currentTarget.innerText;c(t)};return Object(a.jsxs)(ut.a,{children:[Object(a.jsx)(ut.a.Header,{children:Object(a.jsxs)(Me.a,{variant:"tabs",children:[Object(a.jsx)(Me.a.Item,{children:Object(a.jsx)(Me.a.Link,{onClick:s,children:"Add book"})}),Object(a.jsx)(Me.a.Item,{children:Object(a.jsx)(Me.a.Link,{onClick:s,children:"Favorite books"})})]})}),Object(a.jsxs)(ut.a.Body,{children:[Object(a.jsx)(ut.a.Title,{children:n}),"Add book"===n&&Object(a.jsx)(wt,{}),"Favorite books"===n&&Object(a.jsx)(St,{})]})]})},Ct=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{isSidebarVisible:e.sidebar,viewportWidth:e.viewport}})),n=t.isSidebarVisible,r=t.viewportWidth;return Object(a.jsx)(d.a,{children:Object(a.jsxs)(st.a,{className:"mt-4",children:[r>768?Object(a.jsx)(gt,{}):Object(a.jsx)(ft,{isVisible:n,onHide:function(){return e(Ie)},children:Object(a.jsx)(gt,{})}),Object(a.jsx)(Nt,{})]})})},Tt=function(e){var t=e.bookId,n=e.description,c=e.isShow,s=Object(r.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1],d=Object(r.useState)(""),b=Object(u.a)(d,2),h=b[0],p=b[1];Object(r.useEffect)((function(){p(n)}),[n]);var f=o?function(){var e=Object(X.a)(Y.a.mark((function e(){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t,h);case 2:n=e.sent,p(n),l(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}():function(){l(!0)};return Object(a.jsxs)("div",{className:"my-4",children:[o?Object(a.jsxs)(re.a,{children:[Object(a.jsx)(re.a.Group,{controlId:"exampleForm.ControlTextarea1",children:Object(a.jsx)(re.a.Control,{onChange:function(e){p(e.target.value)},as:"textarea",rows:3,value:h})}),Object(a.jsx)(j.a,{onClick:function(){l(!1),p(n)},variant:"outline-danger",size:"sm",className:"float-right",children:Object(a.jsxs)("span",{children:["Cancel",Object(a.jsx)("i",{className:"fa fa-ban fa-lg ml-2","aria-hidden":"true"})]})})]}):Object(a.jsx)(ut.a.Text,{children:h}),c&&Object(a.jsx)(j.a,{onClick:f,variant:"outline-info mb-4",size:"sm",children:Object(a.jsxs)("span",{children:["Edit description",Object(a.jsx)("i",{className:"fa fa-pencil-square-o fa-lg ml-2","aria-hidden":"true"})]})})]})},Et=function(e){var t=e.bookId,n=new FormData,c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)("Choose file..."),d=Object(u.a)(l,2),b=d[0],h=d[1],p=function(){var e=Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i&&(n.append("bookImage",i),n.append("bookId",t.toString()),xt(n),o(""));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)(nt.a,{className:"float-right",menuAlign:"right",title:Object(a.jsxs)("span",{children:["Upload new image",Object(a.jsx)("i",{className:"fa fa-picture-o fa-lg ml-2","aria-hidden":"true"})]}),id:"dropdown-menu-align-right",variant:"outline-info",size:"sm",children:Object(a.jsx)(at.a.ItemText,{children:Object(a.jsxs)("div",{className:"input-group m-1 border border-info rounded",style:{minWidth:"400px"},children:[Object(a.jsxs)("div",{className:"custom-file",children:[Object(a.jsx)("input",{type:"file",onChange:function(e){var t=e.currentTarget.files[0];o(t),h(t.name)},className:"custom-file-input",id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04"}),Object(a.jsx)("label",{className:"custom-file-label",htmlFor:"inputGroupFile04",children:b})]}),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)(j.a,{className:"float-right",onClick:p,variant:"outline-info",size:"sm",children:"Upload"})})]})})})},At=function(e){return{type:E,bookReviews:e}},Pt=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.get("/review",{params:{bookId:t}});case 2:n=e.sent,In.dispatch(At(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bt=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.post("/review",Object(Q.a)({},t));case 2:n=e.sent,In.dispatch(At(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.patch("/review",Object(Q.a)({},t));case 2:n=e.sent,In.dispatch(At(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(X.a)(Y.a.mark((function e(t){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.delete("/review",{params:Object(Q.a)({},t)});case 2:n=e.sent,In.dispatch(At(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(b.d)((function(e){return{userId:e.auth.id,bookId:e.bookPage.book.id}})),t=e.userId,n=e.bookId,c=Object(r.useState)(!1),s=Object(u.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)(""),d=Object(u.a)(l,2),h=d[0],p=d[1],f=Object(r.useState)(1),m=Object(u.a)(f,2),O=m[0],x=m[1],g=Array.from(Array(5).keys()),v=function(e){var t=e.target.id;x(+t+1)},k=i?function(){var e=Object(X.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bt({userId:t,bookId:n,grade:O,comment:h}),p(""),x(0),o(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}():function(){o(!0)};return Object(a.jsxs)("div",{className:"mt-4",children:[i&&Object(a.jsxs)(re.a,{children:[Object(a.jsx)(re.a.Group,{controlId:"exampleForm.ControlTextarea1",children:Object(a.jsx)(re.a.Control,{onChange:function(e){var t=e.target.value;p(t)},as:"textarea",rows:3})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Rating"}),Object(a.jsx)(Ce.a,{className:"mt-1 ml-1",children:g.map((function(e){var t=e>=O?"-o":"";return Object(a.jsx)("div",{children:Object(a.jsx)(j.a,{onFocus:v,id:e.toString(),variant:"outline-warning btn-tog btn-bdnone star-rat mb-2",size:"sm",children:Object(a.jsx)("i",{className:"fa fa-star".concat(t," fa-lg"),"aria-hidden":"true"})})},e+"q")}))})]}),Object(a.jsx)(j.a,{onClick:function(){return o(!1)},variant:"outline-danger float-right ml-3",size:"sm",children:Object(a.jsxs)("span",{children:["Cancel",Object(a.jsx)("i",{className:"fa fa-ban fa-lg ml-2","aria-hidden":"true"})]})})]}),Object(a.jsx)(j.a,{onClick:k,variant:"outline-info mb-3 float-right",size:"sm",children:Object(a.jsxs)("span",{children:["Add feedback",Object(a.jsx)("i",{className:"fa fa-pencil-square-o fa-lg ml-2","aria-hidden":"true"})]})})]})},Rt=function(e){var t=e.handleChange,n=e.handleDelete;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Qe.a,{onClick:n,variant:"danger float-right mx-1",children:Object(a.jsx)(Me.a.Link,{className:"p-1 text-light",children:Object(a.jsx)("i",{className:"fa fa-trash-o","aria-hidden":"true"})})}),Object(a.jsx)(Qe.a,{onClick:t,variant:"info float-right mx-1",children:Object(a.jsx)(Me.a.Link,{className:"p-1 text-light",children:Object(a.jsx)("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})})})]})},_t=function(e){var t=e.submitForm,n=e.toggleForm,c=e.initialValue,s=e.initialGrade,i=Object(r.useState)(s),o=Object(u.a)(i,2),l=o[0],d=o[1],b=function(e){var t=e.target.id;d(+t+1)},h=Object(r.useState)(c),p=Object(u.a)(h,2),f=p[0],m=p[1],O=Array.from(Array(5).keys());return Object(a.jsxs)("div",{className:"mt-4",children:[Object(a.jsxs)(re.a,{children:[Object(a.jsx)(re.a.Group,{controlId:"exampleForm.ControlTextarea1",children:Object(a.jsx)(re.a.Control,{onChange:function(e){var t=e.currentTarget.value;m(t)},as:"textarea",rows:3,value:f})}),Object(a.jsx)(Ce.a,{className:"mt-1 ml-1 float-left",children:O.map((function(e){var t=e>=l?"-o":"";return Object(a.jsx)("div",{children:Object(a.jsx)(j.a,{onFocus:b,id:e.toString(),variant:"outline-warning btn-tog btn-bdnone star-rat mb-2",size:"sm",children:Object(a.jsx)("i",{className:"fa fa-star".concat(t," fa-lg"),"aria-hidden":"true"})})},e+"q")}))}),Object(a.jsx)(j.a,{onClick:function(){return n(!1)},variant:"outline-danger float-right ml-3",size:"sm",children:Object(a.jsxs)("span",{children:["Cancel",Object(a.jsx)("i",{className:"fa fa-ban fa-lg ml-2","aria-hidden":"true"})]})})]}),Object(a.jsx)(j.a,{onClick:function(){t(f,l)},variant:"outline-info mb-3 float-right",size:"sm",children:Object(a.jsxs)("span",{children:["Submit",Object(a.jsx)("i",{className:"fa fa-pencil-square-o fa-lg ml-2","aria-hidden":"true"})]})})]})},Gt=function(e){var t=e.review,n=Object(r.useState)(!1),c=Object(u.a)(n,2),s=c[0],i=c[1],o=Object(b.d)((function(e){return{bookId:e.bookPage.book.id,userId:e.auth.id}})),l=o.userId,d=o.bookId,j=l===t.reviewer.id;return Object(a.jsx)(a.Fragment,{children:s?Object(a.jsx)(_t,{submitForm:function(e,t){Ft({userId:l,bookId:d,grade:t,comment:e}),i(!1)},toggleForm:i,initialValue:t.comment,initialGrade:t.grade}):Object(a.jsxs)(a.Fragment,{children:[j&&Object(a.jsx)(Rt,{handleChange:function(){i(!0)},handleDelete:function(){Lt({userId:l,bookId:d})}}),Object(a.jsx)("div",{className:"float-left",children:t.comment}),Object(a.jsx)("div",{className:"float-right",children:Object(a.jsx)(Qe.a,{className:"align-middle",children:t.reviewer.name})}),Object(a.jsx)("span",{className:"mx-4 float-right",children:Array.from(Array(5).keys()).map((function(e){var n=+e<t.grade?"":"-o";return Object(a.jsx)("i",{className:"fa fa-star".concat(n," text-warning  align-middle"),"aria-hidden":"true"},e+"y")}))})]})})},Ut=function(){var e=Object(b.d)((function(e){return{reviews:e.reviews.bookReviews,reviewUserId:e.reviews.reviewerId,isAuth:e.auth.isLoggedIn,userId:e.auth.id}})),t=e.reviews,n=e.isAuth,r=e.userId!==e.reviewUserId&&n;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(yt.a,{children:[r&&Object(a.jsx)(Dt,{}),t.map((function(e){return Object(a.jsx)(yt.a.Item,{children:Object(a.jsx)(Gt,{review:e})},e.comment+e.grade)}))]})})},zt=n(232),Wt=n(236),Ht=n(233),Vt=n(228),Mt=n(229),qt=n(230),Kt=n(231);n(209);Ht.a.use([Vt.a,Mt.a,qt.a,Kt.a]);var Qt=function(e){var t=e.images,n=Object(r.useState)(null),s=Object(u.a)(n,2),i=s[0],o=s[1],l=t.map((function(e,t){return Object(a.jsx)(zt.a,{tag:"li",children:Object(a.jsx)("img",{src:e,style:{listStyle:"none",width:"300px",height:"500px"},alt:"Slide ".concat(t+1)})},e+t)})),d=t.map((function(e,t){return Object(a.jsx)(zt.a,{tag:"li",style:{listStyle:"none"},children:Object(a.jsx)("img",{style:{width:"100px",height:"150px"},src:e,alt:"Thumbnail ".concat(t+1)})},"thumb-".concat(t))}));return Object(a.jsxs)(c.a.Fragment,{children:[Object(a.jsx)(Wt.a,{id:"main",thumbs:{swiper:i},tag:"section",wrapperTag:"ul",navigation:!0,pagination:!0,spaceBetween:0,slidesPerView:1,children:l}),Object(a.jsx)(Wt.a,{id:"thumbs",spaceBetween:5,slidesPerView:3,onSwiper:o,children:d})]})},Jt=function(){var e=Object(b.c)(),t=Object(b.d)((function(e){return{book:e.bookPage.book,bookImages:e.bookPage.bookImages,userId:e.auth.id,viewportWidth:e.viewport,isSidebarVisible:e.sidebar}})),n=t.book,c=t.bookImages,s=t.userId,i=t.viewportWidth,o=t.isSidebarVisible;Object(r.useEffect)((function(){var e=+localStorage.getItem("bookId");Pt(e),Be(e)}),[s]);var u=s===n.userId,l=[n.bookIcon].concat(Object(Ge.a)(c.map((function(e){return e.url}))));return Object(a.jsxs)(d.a,{children:[i<768&&Object(a.jsx)(ft,{isVisible:o,onHide:function(){return e(Ie)}}),Object(a.jsxs)(ut.a,{children:[Object(a.jsxs)(ut.a.Header,{as:"h5",children:[n.writer.name,u&&Object(a.jsx)(Et,{bookId:n.id})]}),Object(a.jsx)(d.a,{className:"mt-2 text-center",children:Object(a.jsx)(Qt,{images:l})}),Object(a.jsxs)(ut.a.Body,{children:[Object(a.jsxs)(ut.a.Title,{children:[n.name,Object(a.jsx)(j.a,{className:"float-right mt-4",variant:"outline-warning",size:"sm",children:Object(a.jsxs)("strong",{className:"text-danger",children:["$ ".concat((n.price/100).toFixed(2)),Object(a.jsx)("i",{className:"fa fa-shopping-cart fa-lg ml-2","aria-hidden":"true"})]})})]}),Object(a.jsx)(Tt,{description:n.description,bookId:n.id,isShow:u}),Object(a.jsx)(Ut,{})]})]})]})},$t=function(){return Object(b.d)((function(e){return{isAuth:e.auth.isLoggedIn}})).isAuth?Object(a.jsxs)(Ne.c,{children:[Object(a.jsx)(Ne.a,{path:"/",exact:!0,component:mt}),Object(a.jsx)(Ne.a,{path:"/book",exact:!0,component:Jt}),Object(a.jsx)(Ne.a,{path:"/profile",exact:!0,component:Ct})]}):Object(a.jsxs)(Ne.c,{children:[Object(a.jsx)(Ne.a,{path:"/",exact:!0,component:mt}),Object(a.jsx)(Ne.a,{path:"/book",exact:!0,component:Jt})]})},Yt=function(){return Object(a.jsxs)(de.a,{variant:"danger",children:[Object(a.jsx)(de.a.Heading,{children:"Oh snap! You got an error!"}),Object(a.jsx)("p",{children:"Change this and that and try again. Duis mollis, est non commodo luctus, nisi erat porttitor ligula, eget lacinia odio sem nec elit. Cras mattis consectetur purus sit amet fermentum."})]})},Xt=function(){var e=Object(b.c)();Object(r.useEffect)((function(){var t=function(){var t=window.innerWidth;t<=768&&e(Ie),e(function(e){return{type:F,viewportWidth:e}}(t))};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[e]);var t=Object(b.d)((function(e){return{error:e.error}})).error;return Object(a.jsxs)(o.a,{children:[Object(a.jsx)(Se,{}),t?Object(a.jsx)(Yt,{}):Object(a.jsx)($t,{})]})},Zt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,244)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},en=n(44),tn=(n(210),n(211),{book:{id:0,bookIcon:"",writer:{name:""},name:"",description:"",rating:0,price:0,userId:0,user:[{id:0}]},bookImages:[{id:0,url:"",bookId:0}]}),nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return t.payload;case A:return Object(Q.a)(Object(Q.a)({},e),{},{bookImages:t.payload.bookImages});default:return e}},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[""],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.payload;default:return e}},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[""],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload;default:return e}},cn={id:0,name:"",userImg:"",isLoggedIn:!1},sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{id:t.payload.id,name:t.payload.userName,userImg:t.payload.iconUrl,isLoggedIn:!0};case p:return cn;case y:return Object(Q.a)(Object(Q.a)({},e),{},{userImg:t.payload.iconUrl});default:return e}},on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[2e3,1e4],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.payload;default:return e}},un=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return!1;case g:return!0;default:return e}},ln={authors:[],gener:"",price:"",rating:null},dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(Q.a)(Object(Q.a)({},e),{},{authors:t.authors});case I:return Object(Q.a)(Object(Q.a)({},e),{},{price:t.price});case S:return Object(Q.a)(Object(Q.a)({},e),{},{rating:t.rating});case N:return Object(Q.a)(Object(Q.a)({},e),{},{gener:t.gener});default:return e}},jn=[{id:0,bookIcon:"",writer:{name:""},name:"",description:"",rating:0,price:0,userId:0,user:[{id:0}]}],bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return t.payload;default:return e}},hn={bookReviews:[{comment:"",grade:0,id:0,reviewer:{name:"",id:0}}],reviewerId:0},pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.bookReviews;default:return e}},fn={books:[{id:0,bookIcon:"",writer:{name:""},name:"",description:"",rating:0,price:0,userId:0,user:[{id:0}]}],loading:!0},mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return e;case m:return{books:t.payload,loading:!1};default:return e}},On=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return!0;case B:return!1;default:return e}},xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return t.viewportWidth;default:return e}},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sortTarget:"name",direction:"ASC"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(Q.a)(Object(Q.a)({},e),{},{direction:t.payload});case L:return Object(Q.a)(Object(Q.a)({},e),{},{sortTarget:t.payload});default:return e}},vn={page:1,pageCount:5},kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(Q.a)(Object(Q.a)({},e),{},{page:t.payload});case _:return Object(Q.a)(Object(Q.a)({},e),{},{pageCount:t.payload});default:return e}},wn=Object(en.combineReducers)({bookList:mn,bookPage:nn,geners:an,authors:rn,auth:sn,filter:dn,price:on,favorites:bn,reviews:pn,error:un,sidebar:On,viewport:xn,sort:gn,page:kn}),yn=n(140),In=Object(en.createStore)(wn,Object(yn.composeWithDevTools)(Object(en.applyMiddleware)()));i.a.render(Object(a.jsx)(b.a,{store:In,children:Object(a.jsx)(Xt,{})}),document.getElementById("root")),Zt()}},[[212,1,2]]]);
//# sourceMappingURL=main.2b47ca52.chunk.js.map